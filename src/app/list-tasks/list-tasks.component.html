<div class="container mt-5">
  <div class="row justify-content-between">
    <h1 class="text-center mb-4">Your Tasks</h1>
    
    <!-- Pending Tasks -->
    <div class="col-md-3 mb-4">
      <div class="card shadow-sm border-info">
        <div class="card-header bg-info text-white text-center">
          <h4>Pending</h4>
        </div>
        <div class="card-body">
          <div *ngFor="let task of pendingTasks" class="task-card mb-3">
            <h5 class="task-title">{{ task.title }}</h5>
            <p class="task-description">{{ task.description }}</p>
            <p class="task-due-date"><strong>Due Date:</strong> {{ task.dueDate | date:'shortDate' }}</p>
            <div class="d-flex justify-content-between">
              <button class="btn btn-outline-info btn-sm" (click)="changeStatus(task, 'right')">
                ➡️
              </button>
              <button class="btn btn-warning btn-sm" (click)="editTask(task)">
                ✏️ Edit
              </button>
              <button class="btn btn-danger btn-sm" (click)="openDeleteModal(task._id)">
                🗑️ Delete
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- In Progress Tasks -->
    <div class="col-md-3 mb-4">
      <div class="card shadow-sm border-warning">
        <div class="card-header bg-warning text-white text-center">
          <h4>In Progress</h4>
        </div>
        <div class="card-body">
          <div *ngFor="let task of inProgressTasks" class="task-card mb-3">
            <h5 class="task-title">{{ task.title }}</h5>
            <p class="task-description">{{ task.description }}</p>
            <p class="task-due-date"><strong>Due Date:</strong> {{ task.dueDate | date:'shortDate' }}</p>
            <div class="d-flex justify-content-between">
              <button class="btn btn-outline-warning btn-sm" (click)="changeStatus(task, 'left')">
                ⬅️
              </button>
              <button class="btn btn-outline-success btn-sm" (click)="changeStatus(task, 'right')">
                ➡️
              </button>
              <button class="btn btn-warning btn-sm" (click)="editTask(task)">
                ✏️ Edit
              </button>
              <button class="btn btn-danger btn-sm" (click)="openDeleteModal(task._id)">
                🗑️ Delete
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Completed Tasks -->
    <div class="col-md-3 mb-4">
      <div class="card shadow-sm border-success">
        <div class="card-header bg-success text-white text-center">
          <h4>Completed</h4>
        </div>
        <div class="card-body">
          <div *ngFor="let task of completedTasks" class="task-card mb-3">
            <h5 class="task-title">{{ task.title }}</h5>
            <p class="task-description">{{ task.description }}</p>
            <p class="task-due-date"><strong>Due Date:</strong> {{ task.dueDate | date:'shortDate' }}</p>
            <div class="d-flex justify-content-between">
              <button class="btn btn-outline-success btn-sm" (click)="changeStatus(task, 'left')">
                ⬅️
              </button>
              <button class="btn btn-warning btn-sm" (click)="archiveTask(task._id)">
                📦 Archive
              </button>
              <button class="btn btn-danger btn-sm" (click)="openDeleteModal(task._id)">
                🗑️ Delete
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>

  </div>
</div>

<!-- Delete Confirmation Modal -->
<div class="modal fade" id="deleteModal" tabindex="-1" aria-labelledby="deleteModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="deleteModalLabel">Confirm Deletion</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">Are you sure you want to delete this task?</div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
        <button type="button" class="btn btn-danger" (click)="confirmDelete()">Delete</button>
      </div>
    </div>
  </div>
</div>
